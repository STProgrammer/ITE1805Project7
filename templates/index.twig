<!DOCTYPE html>
<html>
  <head>
    <title>
      Filarkiv - viser filer fra database
    </title>
		<link type="text/css" rel="stylesheet" href="stilark.css" />
        <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
  </head>
      {% include 'login2.twig' %}
          {% if session.getFlashBag.has('header') %}
      <div class="flash-notice">
          {% for header in session.getFlashBag.get('header', []) %}
          <h2>{{ header }}</h2>
          {% endfor %}
          {% for message in session.getFlashBag.get('message', []) %}
              <h2>{{ message }}</h2>
          {% endfor %}
              <p><a href = "./">Back </a></p>
      </div>
          {% else %}

      <p><form method = "get">
          <input type="text" name="query" placeholder="Search" maxlength="45">
          <br><button type="submit" name="search" value="search">Search</button>
      <br></p>
      </form>
      <form method = "get">
          <label for="tags">Write tags here separated by comma: </label><br>
          <input type="text" name="tags" data-role="tagsinput" placeholder="tag1,tag2,tag3"></td></tr>
          <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
          <script src="http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script>
          <button type="submit" name="search" value="tagssearch">Search by tags</button></form>
          <br>


          <h1>
              Filearchive - showing files
          </h1>
          <pre>
            <p><a href="{{rel}}file-upload/">Add new</a> </p>
        </pre>
      {% if catalog %}
          <h2>
              {{ catalog.getCatalogName() }}
          </h2>
      {% endif %}
  {% if elements %}
      <div id="filliste">
          <ul>
              {% for element in elements %}
                  {% if element.isFile == 0 %}
                      <li>
                          <a href="{{rel}}?catalogid={{element.id}}">{{element.Title}}</a> {{element.date}}
                          <a href="{{rel}}catalog/?id={{element.id}}"> Details </a>&nbsp;
                      </li>
                  {% else %}
                      {% if element.type == 'image/jpeg' or  element.type == 'image/pjpeg' or element.type == 'image/png' or element.type == 'image/gif'%}
                          <a href="{{rel}}?id={{element.id}}"><img src="{{rel}}?id={{element.id}}" width="10%"/></a>
                          <a href="{{rel}}file-details/?id={{element.id}}"> Details </a>
                      {% elseif element.type == 'video/mp4' or element.type == 'video/webm' or element.type == 'video/ogg' %}
                          <video width="25%" height="100%" controls>
                              <source src="?id={{element.id}}" type="{{element.type}}">
                          </video>
                      {% else %}
                          <li>
                              <a href="{{rel}}?id={{element.id}}">{{element.Title}}</a> {{element.date}}
                              <a href="{{rel}}file-details/?id={{element.id}}"> Details </a>
                          </li>
                      {% endif %}
                  {% endif %}
              {% endfor %}
          </ul>
      </div>
  {% endif %}
              {{ dump(pagination) }}
              {{ dump('pageno') }}
              {% if pagination %} <div id="pagination">
                  {% for page in pagination %}
                  {% if request.query.get('pageno') == page %} {{ page }}
                      {% else %} <a href="?pageno={{ page }}">{{ page }}</a>
                      {% endif %}
                  {% endfor %}
              </div>
              {% endif %}

          {% endif %}
  </body>
</html>
